# Developement Guide

DryTooling is an unpublished rolling release package set composed of several sub-packages currently not following any versioning semantics. That means that new features are added and only the commits track differences. This is temporary and will be modified when all the old code base that is giving origing to the package is migrated here. Nonetheless, the package will probably not be published to Julia registries because of the way its governance works. DryTooling tries to be self-contained in several aspects because of the needs of perfect integration between functionalities of several of its foreseen end applications. That is currently incompatible with using some of the state-of-the-art packages from Julia ecosystem.

This page aims at providing a *tutorial* for managing DryTooling.

## Adding new packages

To add a new package to the framework launch a terminal under the `src/` directory of the parent repository and state a julia REPL. Then change to `pkg>` mode by pressing `]` and run `generate DryTooling<package-name>.jl`, where you should replace the `<package-name>` by the actual package's name.

- Packages must use cammel-case naming scheme and start with `DryTooling`.
- Do not forget to add a `.jl` to the end of the package name.

This will create a subdirectory with the given package name and its own `src/` directory and `Project.toml` file.

Next you need to add the package to the documentation workflow. In section `Install dependencies` of `.github/workflows/documentation.yaml` add the following line:

```julia
Pkg.develop(url="https://github.com/DryTooling/DryTooling.jl", subdir="src/DryTooling<package-name>.jl");
```

Also update `docs/make.jl` following the pattern for existing sub-packages.

## Generating the documentation

Documentation is generated by a GitHub Actions workflow at every commit to the main branch. Because of the multiple package in a repository structure, this documentation follows *intrinsically* a rolling release logic. Because the packages are not registered, they also do not appear in the `docs/Project.toml`. So it is up to the maintainers to ensure that section `[deps]` of `docs/Project.toml` points to **ALL** dependencies of **ALL** subpackages.

For generating the documentation locally, from an active `docs/` environment adding all sub-packages to development mode as in `(docs) pkg> develop ../src/DryToolingCore.jl`. Then back to Julia REPL run `julia> include("make.jl")`. Alternativelly one can add the following lines to `docs/Project.toml` and run directly `make.jl` as before:

```toml
DryToolingCore = "8d904351-f17f-419c-aa8d-05d4f5cffd52"
DryToolingGranular = "c4cd2e39-2c11-49af-bb08-d9d53d680cb6"
DryToolingKinetics = "6073c425-3840-42bf-8fb8-df8bffbffcc3"
```

After generating the documentation **DO NOT** commit changes to `docs/Project.toml`, otherwise GitHub Actions workflow will fail (because packages are not registered).
